<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<meta name="keyword" content="">

    <link rel="shortcut icon" href="

   
<a class="edit-link" href="https://github.com/mongodb/mongo-cxx-driver/blob/master/docs/content/contributing/testing-mongocxx.md" target="_blank" title="Edit contributing/testing-mongocxx.md on GitHub"><i class="fa fa-pencil-square-o"></i></a>













<h2 id="testing-the-mongocxx-driver">Testing the mongocxx driver</h2>

<p>Tests for the C++11 driver use
<a href="https://github.com/philsquared/Catch">Catch</a>, a testing framework for C++.</p>

<p>Each class in the driver has a corresponding file in <code>src/mongocxx/test</code>.
Because the new driver wraps
<a href="https://github.com/mongodb/mongo-c-driver">libmongoc</a>, we prefer to mock
and test the behavior of individual classes rather than test end-to-end
behavior of operations against a running mongod.  In other words, these are
unit tests rather than integration tests.</p>

<p>We also have integration tests for this driver in <code>test/collection.cpp</code>.</p>

<h2 id="running-the-existing-tests">Running the existing tests</h2>

<p>Build the tests with:</p>

<pre><code>make
</code></pre>

<p>This will generate test binaries.  You can either run all the tests with:</p>

<pre><code>make test
</code></pre>

<p>or, for more detailed output with Catch, run the generated binary:</p>

<pre><code>./build/src/mongocxx/test/test_driver
</code></pre>

<h2 id="writing-new-tests">Writing new tests</h2>

<p>If you&rsquo;d like to add a feature to the driver, please write a test for it as
well.  Additions to existing classes should have new sections added to the
existing test cases:</p>

<pre><code>TEST_CASE(&quot;existing_class&quot;, &quot;[existing_class]&quot;) {
   SECTION(&quot;Can do some new thing&quot;) {
      ...
      REQUIRE(new_thing_works);
   }
}
</code></pre>

<p>If you are adding a new class, please add a new test file for it to the
<code>test</code> directory.  The test file&rsquo;s name should match the new class&rsquo;s file&rsquo;s
name.  You will need to add your file as a source for the driver&rsquo;s test
target, in <code>src/mongocxx/test/CMakeLists.txt</code>:</p>

<pre><code>set(mongocxx_test_sources
   ...
   some_new_class.cpp
   ...
)
</code></pre>






<div id="btnv">
  
  
</div>
</div>


</div>
<div class="right-column">
<div class="wrapper">
  
  <div class="toc">
    <span class="toc-header">On this page</span>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#testing-the-mongocxx-driver">Testing the mongocxx driver</a></li>
<li><a href="#running-the-existing-tests">Running the existing tests</a></li>
<li><a href="#writing-new-tests">Writing new tests</a></li>
</ul></li>
</ul>
</nav>
  </div>
  
</div>
</div>

</div>
</div>
</div>
</section>
</section>

</section>


<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
   URL_ROOT:    

<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-K75Z5Q"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
{'gtm.start': new Date().getTime(),event:'gtm.js'}
);var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K75Z5Q');</script>


<script type="text/javascript">
var _elqQ = _elqQ || [];
_elqQ.push(['elqSetSiteId', '413370795']);
_elqQ.push(['elqTrackPageView']);
(function () {
function async_load()
{ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//img03.en25.com/i/elqCfg.min.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); }
if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
else if (window.attachEvent) window.attachEvent('onload', async_load);
})();
</script>

</body>
</html>

