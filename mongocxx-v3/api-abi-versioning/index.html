<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<meta name="keyword" content="">

    <link rel="shortcut icon" href="

   
<a class="edit-link" href="https://github.com/mongodb/mongo-cxx-driver/blob/master/docs/content/mongocxx-v3/api-abi-versioning.md" target="_blank" title="Edit mongocxx-v3/api-abi-versioning.md on GitHub"><i class="fa fa-pencil-square-o"></i></a>













<h1 id="versioning">Versioning</h1>

<h2 id="api-versioning">API Versioning</h2>

<ul>
<li>We use <a href="http://semver.org/">semantic versioning</a>.</li>
<li>bsoncxx and mongocxx both define corresponding CMake variables for MAJOR, MINOR, and PATCH.</li>
</ul>

<h2 id="abi-versioning">ABI Versioning</h2>

<ul>
<li>Both bsoncxx and mongocxx both have a single scalar ABI version.</li>
<li>Only bump ABI version on <strong>incompatible</strong> ABI change (not for ABI additions).</li>
<li><strong>We stay on ABI version _noabi (without bumping for incompatible changes) until ABI is stable.</strong></li>
</ul>

<h2 id="parallel-header-installation">Parallel Header Installation</h2>

<ul>
<li>For mongocxx, install all headers to <code>$PREFIX/mongocxx/v$ABI/</code>.</li>
<li>For bsoncxx, install all headers to <code>$PREFIX/bsoncxx/v$ABI/</code>.</li>
<li>We install a pkg-config file to shield consumers from this complexity.</li>
</ul>

<h2 id="sonames-and-symlinks">Sonames and symlinks</h2>

<p><em>Note that below examples are given for libmongocxx, but also apply to libbsoncxx</em></p>

<p><em>DSO = Dynamic Shared Object, to use Ulrich Drepper&rsquo;s terminology</em></p>

<ul>
<li>Physical filename for a DSO is <code>libmongocxx.so.$MAJOR.$MINOR.$PATCH</code></li>
</ul>

<p>Note that the physical filename is disconnected from ABI version/soname.
This looks a bit strange, but allows multiple versions of the library with
the same ABI version to be installed on the same system.</p>

<ul>
<li>soname for a DSO is <code>libmongocxx.$ABI</code></li>
</ul>

<p>We provide a soname symlink that links to the physical DSO.  We also
provide a dev symlink that links to the soname symlink of the highest ABI
version of the library installed.</p>

<h2 id="inline-namespaces">Inline namespaces</h2>

<ul>
<li>We provide inline namespace macros for both mongocxx and bsoncxx.</li>
<li>This allows multiple, ABI incompatible versions of the library to be linked into the same application.</li>
<li>The name of the namespace is <code>v$ABI</code>. We create them from ABI version to maintain forwards compatibibility.</li>
</ul>






<div id="btnv">
  
  
</div>
</div>


</div>
<div class="right-column">
<div class="wrapper">
  
  <div class="toc">
    <span class="toc-header">On this page</span>
    <nav id="TableOfContents">
<ul>
<li><a href="#versioning">Versioning</a>
<ul>
<li><a href="#api-versioning">API Versioning</a></li>
<li><a href="#abi-versioning">ABI Versioning</a></li>
<li><a href="#parallel-header-installation">Parallel Header Installation</a></li>
<li><a href="#sonames-and-symlinks">Sonames and symlinks</a></li>
<li><a href="#inline-namespaces">Inline namespaces</a></li>
</ul></li>
</ul>
</nav>
  </div>
  
</div>
</div>

</div>
</div>
</div>
</section>
</section>

</section>


<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
   URL_ROOT:    

<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-K75Z5Q"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
{'gtm.start': new Date().getTime(),event:'gtm.js'}
);var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K75Z5Q');</script>


<script type="text/javascript">
var _elqQ = _elqQ || [];
_elqQ.push(['elqSetSiteId', '413370795']);
_elqQ.push(['elqTrackPageView']);
(function () {
function async_load()
{ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//img03.en25.com/i/elqCfg.min.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); }
if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
else if (window.attachEvent) window.attachEvent('onload', async_load);
})();
</script>

</body>
</html>

