<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<meta name="keyword" content="">

    <link rel="shortcut icon" href="

   
<a class="edit-link" href="https://github.com/mongodb/mongo-cxx-driver/blob/master/docs/content/mongocxx-v3/installation.md" target="_blank" title="Edit mongocxx-v3/installation.md on GitHub"><i class="fa fa-pencil-square-o"></i></a>













<h1 id="installing-the-mongocxx-driver">Installing the mongocxx driver</h1>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
<li>Any standard Unix platform, or Windows 7 SP1+</li>
<li>GCC 4.8.2+, Clang 3.5+, Apple Clang 5.1+, or Visual Studio C++ 2015
Update 1 or later</li>
<li>CMake 3.2 or later</li>
<li>On Windows, boost 1.56 or later</li>
</ul>

<h2 id="installation">Installation</h2>

<h3 id="step-1-install-the-latest-version-of-the-mongodb-c-driver">Step 1: Install the latest version of the MongoDB C driver.</h3>

<p>The mongocxx driver builds on top of the MongoDB C driver.</p>

<ul>
<li>For mongocxx-3.0.x, we recommend the latest stable version of libmongoc
(currently version 1.5.0 at the time this page was written).</li>
<li>For mongocxx-3.1.0 release candidates, libmongoc 1.5.0 or later is
required.</li>
</ul>

<p>Unless you know that your package manager offers a high-enough version, you
will need to download and build from the source code. Get a tarball from
the <a href="https://github.com/mongodb/mongo-c-driver/releases">C Driver releases</a>
page.</p>

<p>Follow the instructions for building from a tarball at
<a href="http://mongoc.org/libmongoc/current/installing.html">Installing libmongoc</a>.</p>

<p>If you need static libraries, be sure to use the <code>--enable-static</code>
configure option when building libmongoc.</p>

<h3 id="step-2-choose-a-c-17-polyfill">Step 2: Choose a C++17 polyfill</h3>

<p>The mongocxx driver uses the experimental C++17 features
<code>std::optional</code> and <code>std::string_view</code>. To compile
the mongocxx driver, you must choose one of the following
implementations for these features:</p>

<p>MNMLSTC/core (<em>default for non-Windows platforms</em>)
     Select with <code>-DBSONCXX_POLY_USE_MNMLSTC=1</code>. This option vendors a
     header-only installation of MNMLSTC/core into the bsoncxx library
     installation.  <strong>NOTE</strong>: this will download MLNMLSTC from
     GitHub during the build process.</p>

<p>Boost (<em>default for Windows platforms</em>)
     Select with <code>-DBSONCXX_POLY_USE_BOOST=1</code>. This is currently the
     only option if you are using MSVC.</p>

<p><code>std::experimental</code>
     Select with <code>-DBSONCXX_POLY_USE_STD_EXPERIMENTAL=1</code>. If your
     toolchain&rsquo;s standard library provides <code>optional</code> and
     <code>string_view</code> in the namespace <code>std::experimental</code>, you can use
     this option.</p>

<p>Most users should be fine sticking with the default. However, if you
have an existing application which makes heavy use of one of the
available libraries, you may prefer to build the mongocxx driver
against the same library.</p>

<p><strong>DO NOT</strong> change your project&rsquo;s polyfill if you need to create a
stable binary interface.</p>

<p>Be aware that your standard library&rsquo;s <code>std::experimental</code> implementation
may change over time, breaking binary compatibility in unexpected ways.</p>

<h3 id="step-3-download-the-latest-version-of-the-mongocxx-driver">Step 3: Download the latest version of the mongocxx driver.</h3>

<p>To get the source via git, the <code>releases/stable</code> branch will track the most
recent stable release. For example, to work from a shallow checkout of the
stable release branch:</p>

<pre><code class="language-sh">git clone https://github.com/mongodb/mongo-cxx-driver.git \
    --branch releases/stable --depth 1
cd mongo-cxx-driver/build
</code></pre>

<p>If you prefer to download a tarball, look on the <a href="https://github.com/mongodb/mongo-cxx-driver/releases">mongocxx
releases</a> page for a
link to the release tarball for the version you wish you install.  For
example, to download version 3.1.0:</p>

<pre><code class="language-sh">curl -OL https://github.com/mongodb/mongo-cxx-driver/archive/r3.1.0.tar.gz
tar -xzf r3.1.0.tar.gz
cd mongo-cxx-driver-r3.1.0/build
</code></pre>

<p>Make sure you change to the <code>build</code> directory of whatever source tree you
obtain.</p>

<h3 id="step-4-configure-the-driver">Step 4: Configure the driver</h3>

<p>By default, <code>libmongoc</code> installs into <code>/usr/local</code>.  To configure
mongocxx for installation into <code>/usr/local</code> as well, use the following
<code>cmake</code> command:</p>

<p>(<strong><em>NOTE</em></strong>: The trailing <code>..</code> below is important!  Don&rsquo;t omit it.)</p>

<pre><code>cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local ..
</code></pre>

<p>If you did not install the <code>libmongoc</code> into the default prefix,
substitute the <code>cmake</code> line above with the following lines (replace
<code>MY_INSTALL_PREFIX</code> with the prefix used for installing the C driver:</p>

<pre><code class="language-sh"># MY_INSTALL_PREFIX=&quot;/your/cdriver/prefix&quot;

PKG_CONFIG_PATH=&quot;$MY_INSTALL_PREFIX/lib/pkgconfig&quot; \
  cmake -DCMAKE_BUILD_TYPE=Release \
        -DCMAKE_INSTALL_PREFIX=&quot;$MY_INSTALL_PREFIX&quot; ..
</code></pre>

<p>Remember: to select a polyfill, pass the option to <code>cmake</code>. For example,
to select the Boost polyfill, substitute the <code>cmake</code> line with
the following:</p>

<pre><code class="language-sh">cmake -DCMAKE_BUILD_TYPE=Release -DBSONCXX_POLY_USE_BOOST=1 \
    -DCMAKE_INSTALL_PREFIX=/usr/local ..
</code></pre>

<p>On Windows, here&rsquo;s an example of how to configure for MSVC (assuming
libmongoc and libbson are in <code>c:\mongo-c-driver</code> as given in the
<a href="http://mongoc.org/libmongoc/current/installing.html#building-windows">mongoc Windows installation
instructions</a>
and boost is in <code>c:\local\boost_1_59_0</code>:</p>

<pre><code class="language-sh">'C:\Program Files (x86)\CMake\bin\cmake.exe' -G &quot;Visual Studio 14 Win64&quot;
    -DCMAKE_INSTALL_PREFIX=C:\mongo-cxx-driver
    -DLIBBSON_DIR=c:\mongo-c-driver
    -DBOOST_ROOT=c:\local\boost_1_59_0
    -DLIBMONGOC_DIR=c:\mongo-c-driver
</code></pre>

<h3 id="step-5-build-and-install-the-driver">Step 5: Build and install the driver</h3>

<p>If you are using the default MNMLSTC polyfill and are installing to a
directory requiring root permissions, you should install the polyfill with
<code>sudo</code> before running <code>make</code> so you don&rsquo;t have to run all of <code>make</code> with
<code>sudo</code>:</p>

<pre><code class="language-sh"># Only for MNMLSTC polyfill
sudo make EP_mnmlstc_core
</code></pre>

<p>Once MNMLSTC is installed, or if you are using a different polyfill,
build and install the driver:</p>

<pre><code class="language-sh">make &amp;&amp; sudo make install
</code></pre>

<p>On Windows, build and install from the command line like this:</p>

<pre><code class="language-sh">msbuild.exe ALL_BUILD.vcxproj
msbuild.exe INSTALL.vcxproj
</code></pre>

<h3 id="step-6-test-your-installation">Step 6: Test your installation</h3>

<p>Save the following source file with the filename <code>test.cpp</code>
underneath any directory:</p>

<pre><code class="language-c++">#include &lt;iostream&gt;

#include &lt;bsoncxx/builder/stream/document.hpp&gt;
#include &lt;bsoncxx/json.hpp&gt;

#include &lt;mongocxx/client.hpp&gt;
#include &lt;mongocxx/instance.hpp&gt;

int main(int, char**) {
    mongocxx::instance inst{};
    mongocxx::client conn{mongocxx::uri{}};

    bsoncxx::builder::stream::document document{};

    auto collection = conn[&quot;testdb&quot;][&quot;testcollection&quot;];
    document &lt;&lt; &quot;hello&quot; &lt;&lt; &quot;world&quot;;

    collection.insert_one(document.view());
    auto cursor = collection.find({});

    for (auto&amp;&amp; doc : cursor) {
        std::cout &lt;&lt; bsoncxx::to_json(doc) &lt;&lt; std::endl;
    }
}
</code></pre>

<h4 id="compiling-with-the-help-of-pkg-config">Compiling with the help of pkg-config</h4>

<p>Compile the test program with the following command:</p>

<pre><code class="language-sh">c++ --std=c++11 test.cpp -o test $(pkg-config --cflags --libs libmongocxx)
</code></pre>

<p>If you installed to somewhere not in your pkg-config search path, remember
to set the <code>PKG_CONFIG_PATH</code> environment variable first:</p>

<pre><code>export PKG_CONFIG_PATH=&quot;$MY_INSTALL_PREFIX/lib/pkgconfig&quot;
</code></pre>

<h4 id="compiling-without-pkg-config">Compiling without pkg-config</h4>

<p>If you don&rsquo;t have pkg-config available, you will need to set include and
library flags manually on the command line or in your IDE.</p>

<p>For example, if libmongoc and mongocxx are installed in <code>/usr/local</code>, then
the compilation line in the section above expands to this:</p>

<pre><code class="language-sh">c++ --std=c++11 test.cpp -o test \
  -I/usr/local/include/mongocxx/v_noabi -I/usr/local/include/libmongoc-1.0 \
  -I/usr/local/include/bsoncxx/v_noabi -I/usr/local/include/libbson-1.0 \
  -L/usr/local/lib -lmongocxx -lbsoncxx
</code></pre>

<h4 id="compiling-with-msvc">Compiling with MSVC</h4>

<p>To compile on MSVC, you will need to setup your project to include all the
necessary include paths, library paths, preprocessor defines, and link
libraries. To do this, you can set these values either by the UI or by
editing the XML <code>.vcxproj</code> file directly. To confirm you have everything
setup correctly, here are the <code>PropertyGroup</code> and <code>ItemDefinitionGroup</code>
settings for a Debug x64 build as an example:</p>

<pre><code class="language-xml">  &lt;PropertyGroup Condition=&quot;'$(Configuration)|$(Platform)'=='Debug|x64'&quot;&gt;
    &lt;LinkIncremental&gt;true&lt;/LinkIncremental&gt;
    &lt;IncludePath&gt;c:\local\boost_1_59_0\;C:\mongo-cxx-driver\include\mongocxx\v_noabi;C:\mongo-cxx-driver\include\bsoncxx\v_noabi;C:\mongo-c-driver\include\libmongoc-1.0;C:\mongo-c-driver\include\libbson-1.0;$(IncludePath)&lt;/IncludePath&gt;
    &lt;LibraryPath&gt;c:\mongo-c-driver\lib\;c:\mongo-cxx-driver\lib\;$(LibraryPath)&lt;/LibraryPath&gt;
  &lt;/PropertyGroup&gt;
  &lt;ItemDefinitionGroup Condition=&quot;'$(Configuration)|$(Platform)'=='Debug|x64'&quot;&gt;
    &lt;ClCompile&gt;
      &lt;PrecompiledHeader&gt;Use&lt;/PrecompiledHeader&gt;
      &lt;WarningLevel&gt;Level3&lt;/WarningLevel&gt;
      &lt;Optimization&gt;Disabled&lt;/Optimization&gt;
      &lt;PreprocessorDefinitions&gt;MONGOCXX_STATIC;BSONCXX_STATIC;_DEBUG;_CONSOLE;%(PreprocessorDefinitions)&lt;/PreprocessorDefinitions&gt;
      &lt;SDLCheck&gt;true&lt;/SDLCheck&gt;
    &lt;/ClCompile&gt;
    &lt;Link&gt;
      &lt;SubSystem&gt;Console&lt;/SubSystem&gt;
      &lt;GenerateDebugInformation&gt;true&lt;/GenerateDebugInformation&gt;
      &lt;AdditionalDependencies&gt;libmongocxx.lib;libbsoncxx.lib;mongoc-static-1.0.lib;bson-1.0.lib;%(AdditionalDependencies)&lt;/AdditionalDependencies&gt;
    &lt;/Link&gt;
  &lt;/ItemDefinitionGroup&gt;
</code></pre>






<div id="btnv">
  
  
</div>
</div>


</div>
<div class="right-column">
<div class="wrapper">
  
  <div class="toc">
    <span class="toc-header">On this page</span>
    <nav id="TableOfContents">
<ul>
<li><a href="#installing-the-mongocxx-driver">Installing the mongocxx driver</a>
<ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#installation">Installation</a>
<ul>
<li><a href="#step-1-install-the-latest-version-of-the-mongodb-c-driver">Step 1: Install the latest version of the MongoDB C driver.</a></li>
<li><a href="#step-2-choose-a-c-17-polyfill">Step 2: Choose a C++17 polyfill</a></li>
<li><a href="#step-3-download-the-latest-version-of-the-mongocxx-driver">Step 3: Download the latest version of the mongocxx driver.</a></li>
<li><a href="#step-4-configure-the-driver">Step 4: Configure the driver</a></li>
<li><a href="#step-5-build-and-install-the-driver">Step 5: Build and install the driver</a></li>
<li><a href="#step-6-test-your-installation">Step 6: Test your installation</a>
<ul>
<li><a href="#compiling-with-the-help-of-pkg-config">Compiling with the help of pkg-config</a></li>
<li><a href="#compiling-without-pkg-config">Compiling without pkg-config</a></li>
<li><a href="#compiling-with-msvc">Compiling with MSVC</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
  
</div>
</div>

</div>
</div>
</div>
</section>
</section>

</section>


<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
   URL_ROOT:    

<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-K75Z5Q"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
{'gtm.start': new Date().getTime(),event:'gtm.js'}
);var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K75Z5Q');</script>


<script type="text/javascript">
var _elqQ = _elqQ || [];
_elqQ.push(['elqSetSiteId', '413370795']);
_elqQ.push(['elqTrackPageView']);
(function () {
function async_load()
{ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//img03.en25.com/i/elqCfg.min.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); }
if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
else if (window.attachEvent) window.attachEvent('onload', async_load);
})();
</script>

</body>
</html>

